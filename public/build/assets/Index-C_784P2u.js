import{V as B,b as h,j as e,M as E,r as l,U as x,c as y}from"./app-Bc_-2s0E.js";import{d as $,e as L,b as F}from"./index-e7_T2kQ8.js";import{a as I}from"./index-aR1BPGlc.js";import{u as O,a as R,B as U}from"./useAppUrl-BTnLDpLD.js";import{A as q}from"./AuthenticatedLayout-CyX_iFAO.js";import{F as M,T as Q}from"./TablePagination-Kgtpd3ta.js";import"./iconBase-DVeOcSGg.js";import"./transition-Dbu1amtD.js";const u=["Accession No","Author Name","Title","Year","Course",""],re=({auth:W})=>{const b=O(),N=async({queryKey:s})=>{const[a,o,d,m,j]=s;return(await y.get(`${b}/api/get_thesiz_paginate`,{params:{page:o,title:d,sortColumn:m,sortDirection:j}})).data},{thesiz:i}=B().props,[p,v]=h.useState(""),[c,g]=h.useState((i==null?void 0:i.current_page)||1),[n,t]=h.useState({column:"",direction:"asc"}),{data:r,error:H,isLoading:w,refetch:f}=R({queryKey:["thesiz",c,p,n.column,n.direction],queryFn:N,keepPreviousData:!0}),T=s=>{const a=s.target.value;v(a),a||g(1)},_=s=>{g(s)},A=s=>{let a=n.direction==="asc"?"desc":"asc";s==="Accession No"?t({column:"accession_no",direction:a}):s==="Author Name"?t({column:"author_lastname",direction:a}):s==="Title"?t({column:"title",direction:a}):s==="Year"?t({column:"year",direction:a}):s==="Copies"?t({column:"copies",direction:a}):s==="Course"?t({column:"course",direction:a}):s==="Date Process"?t({column:"date_process",direction:a}):s==="Page No"&&t({column:"page_number",direction:a})},C=(r==null?void 0:r.data.map(s=>{var a;return{id:s.id,file:s.files?`/${s.files}`:null,author_name:`${s.author.firstname} ${s.author.middlename||""} ${s.author.lastname}`,accession_no:s.accession_no,title:s.title,year:s.year,copies:s.copies,date_process:s.date_process,page_number:s.page_number,course:(a=s.course)==null?void 0:a.acronym}}))||[],P=async s=>{if(window.confirm("Are you sure you want to delete this thesis?"))try{const o=await y.delete(`/admin/thesis/${s}`);alert("Thesis deleted successfully!"),f()}catch(o){console.log(o),alert("Thesis deleted successfully!"),f()}};return e.jsxs(q,{header:e.jsx("h2",{className:"text-xl font-semibold leading-tight text-green-100 ",children:"Thesis Page"}),children:[e.jsx(E,{title:"Thesis"}),e.jsx("div",{className:"py-12",children:e.jsx("div",{className:"mx-auto max-w-8xl sm:px-6 lg:px-5",children:e.jsx("div",{className:"overflow-hidden bg-white shadow-sm sm:rounded-lg",children:e.jsx("div",{className:"p-6 text-gray-900",children:e.jsxs(l.Card,{className:"h-full w-full",children:[e.jsxs(l.CardHeader,{floated:!1,shadow:!1,className:"rounded-none",children:[e.jsx("div",{className:"mb-8 flex items-center justify-between gap-8",children:e.jsx("div",{children:e.jsx(l.Typography,{variant:"h5",color:"blue-gray",children:"Thesis List"})})}),e.jsxs("div",{className:"flex flex-col items-center justify-between gap-4 md:flex-row",children:[e.jsx("div",{className:"w-full md:w-80 flex",children:e.jsx(l.Input,{label:"Search for title...",value:p,onChange:T})}),e.jsxs("div",{className:"flex shrink-0 flex-col gap-6 sm:flex-row",children:[e.jsx("a",{href:"/thesis_print",target:"_blank",children:e.jsxs(l.Button,{variant:"outlined",color:"blue-gray",className:"flex items-center gap-1 rounded",size:"sm",children:[e.jsx($,{className:"text-2xl"}),"Print"]})}),e.jsx(x,{href:route("thesis.create"),children:e.jsxs(l.Button,{color:"blue",className:"flex items-center gap-1 rounded",size:"sm",children:[e.jsx(L,{strokeWidth:2,className:"h-5 w-5"}),"Add Thesis"]})})]})]})]}),e.jsx(l.CardBody,{className:"overflow-y-scroll px-0",children:e.jsxs("table",{className:"mt-4 w-full min-w-max table-auto text-left",children:[e.jsx("thead",{children:e.jsx("tr",{children:u.map((s,a)=>e.jsx("th",{onClick:()=>A(s),className:"border border-blue-gray-100 bg-blue-gray-50/50 p-4 cursor-pointer",children:e.jsxs(l.Typography,{variant:"small",color:"blue-gray",className:"flex items-center justify-between gap-2 font-semibold leading-none ",children:[s,a!==u.length-1&&e.jsx(M,{strokeWidth:2,className:`h-4 w-4 transform transition-transform ${n.column===s&&n.direction==="asc"?"rotate-180":""}`})]})},s))})}),e.jsx("tbody",{children:w?e.jsx("tr",{children:e.jsx("td",{colSpan:u.length,className:"border border-blue-gray-100 p-4",children:e.jsx("div",{className:"flex justify-center items-center h-full",children:e.jsx(l.Spinner,{className:"h-10 w-10",color:"green"})})})}):C.map(({id:s,accession_no:a,author_name:o,title:d,year:m,copies:j,date_process:S,course:D,page_number:Y,file:K},k)=>e.jsxs("tr",{className:"hover:bg-blue-gray-50 ",children:[e.jsx("td",{className:"border border-blue-gray-100 py-3 px-4",children:e.jsx(l.Typography,{variant:"small",className:"font-normal text-gray-800",children:a})}),e.jsx("td",{className:"border border-blue-gray-100 px-4",children:e.jsx(l.Typography,{variant:"small",className:"font-normal text-gray-800",children:o})}),e.jsx("td",{className:"border border-blue-gray-100 px-4",children:e.jsx(l.Typography,{variant:"small",className:"font-normal text-gray-800",children:d})}),e.jsx("td",{className:"border border-blue-gray-100 px-4",children:e.jsx(l.Typography,{variant:"small",className:"font-normal text-gray-800",children:m})}),e.jsx("td",{className:"border border-blue-gray-100 px-4",children:e.jsx(l.Typography,{variant:"small",className:"font-normal text-gray-800",children:D})}),e.jsx("td",{className:"border border-blue-gray-100 px-4",children:e.jsxs("div",{className:"flex items-center gap-2 ",children:[e.jsx(l.Tooltip,{content:"Thesis Details",children:e.jsx(x,{className:"hover:bg-blue-800 hover:rounded hover:text-white",href:route("thesis.show",{id:s}),children:e.jsx(I,{className:"text-2xl "})})}),e.jsx(l.Tooltip,{content:"Edit Thesis",children:e.jsx(x,{className:"hover:bg-blue-800 hover:rounded hover:text-white",href:route("thesis.edit",{id:s}),children:e.jsx(U,{className:"text-2xl"})})}),e.jsx(l.Tooltip,{content:"Delete Thesis",children:e.jsx("button",{className:"text-red-800 hover:bg-blue-800 hover:rounded",onClick:()=>P(s),children:e.jsx(F,{className:"text-2xl font-bold"})})})]})})]},k))})]})}),e.jsxs(l.CardFooter,{className:"grid grid-cols-4 items-center border-t border-blue-gray-50 p-4",children:[e.jsx("div",{className:"col-span-1",children:e.jsxs(l.Typography,{variant:"small",color:"blue-gray",className:"font-normal",children:["Page ",r==null?void 0:r.current_page," of"," ",r==null?void 0:r.last_page]})}),e.jsxs("div",{className:"col-span-2 flex flex-col items-center",children:[e.jsx(Q,{currentPage:(r==null?void 0:r.current_page)||1,lastPage:(r==null?void 0:r.last_page)||1,onPageChange:_}),e.jsxs("div",{className:"mt-3 text-gray-700",children:["Showing ",(c-1)*10+1," ","to"," ",Math.min(c*10,r==null?void 0:r.total)," ","of ",r==null?void 0:r.total," entries"]})]})]})]})})})})})]})};export{re as default};
